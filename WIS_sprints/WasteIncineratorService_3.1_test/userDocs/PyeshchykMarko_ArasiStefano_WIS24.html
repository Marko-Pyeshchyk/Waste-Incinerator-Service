<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>

<head>
    <!--
<link rel="stylesheet" type="text/css" href="../css/issStyle1.css">
<script type="text/javascript" src="../css/issStyle.js"></script>
-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/foundation-sites@6.7.4/dist/css/foundation.min.css"
        crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/foundation-sites@6.7.4/dist/js/foundation.min.js"
        crossorigin="anonymous"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="./commons/resources/styles/templateISS.css">
    <link rel="stylesheet" type="text/css" href="./commons/resources/styles/main.css">
    <link rel="stylesheet" type="text/css" href="./commons/resources/styles/navbar.css">
    <link rel="stylesheet" type="text/css" href="./commons/resources/styles/table.css">
    <link rel="stylesheet" type="text/css" href="./commons/resources/styles/code.css">
    <!-- <script type="text/javascript" src="./commons/resources/scripts/myScripts.js"></script> -->
    <style type="text/css">
        body {
            margin-left: 30px;
            margin-right: 30px;
        }

        ;

        P {
            font-family: Tahoma;
            font-size: 10pt;
        }

        ;

        a,
        a:visited,
        a:active,
        a:link,
        a:hover {
            text-decoration: underline;
            color: #545454;
            background-color: transparent;
            font-size: 93%;
        }

        a:hover {
            background-color: #cccccc;
        }


        hr {
            clear: both;
            height: 1px;
            color: #242424;
            background-color: transparent;
        }

        h1,
        h2,
        h3 {
            color: #242424;
            clear: left;
            font: 100% Tahoma, Helvetica, Arial, sans-serif;
            margin-bottom: 0.5em;
            padding-top: 0.5em;
            border-radius: 10px;
            padding: 5px;
        }

        top {
            width: 100%;
        }


        #i {
            color: #ff1010;
        }

        tt {
            font-family: "Arial";
            font-size: 90%;
            color: #006600;
        }

        em {
            font-family: "Arial";
            font-size: 80%;
            font-weight: bold;
            border-style: solid;
            border-color: #abe876;
            color: #1632cc;
        }

        bc {
            font-family: "Arial";
            font-size: 90%;
            font-weight: bold;
            color: #990000;
            background-color: #fcf8c7;
        }

        ks {
            font-family: "Arial";
            font-weight: bold;
            color: #0000CD;
            font-size: 90%;
        }

        kc {
            font-family: "Arial";
            font-weight: bold;
            color: #008000;
            font-size: 90%;
        }

        pre {
            font-family: "Consolas";
            font-size: 85%;
            background-color: #f5f5f5;
            border: 1.5px solid silver;
            padding: 5px;
        }

        m {
            font-family: "Helvetica";
            line-height: 100%;
            font-size: 75%;
        }

        div.body {

            font-size: 18px;
        }

        k {
            color: #990000;
            font-weight: bold;
            font-size: 90%;
        }

        h1 {
            font-size: 150%;
            background-color: #b2c0ff;
            padding: 10px;
        }

        h2 {
            background-color: #9ed8ff;
            font-size: 130%;
        }

        h3 {
            background-color: #e6ccff;
            font-size: 100%;
        }

        h4 {
            background-color: #ccffcc;
            font-size: 100%;
            width: 95%;
            border-radius: 5px;
            padding: 2px;
        }

        h5 {
            background-color: #d5ffb0;
            font-size: 100%;

        }

        div.req {
            background-color: #d9ffb3;
            font-size: 18px;
            width: 700px;
            border: 3px solid green;
            padding: 15px;
            margin: 10px;
        }

        div.remark {
            background-color: #E3F2FD;
            border: 1.5px solid #d5f2ed;
            padding: 15px;
            margin: 10px;
            border-radius: 25px;
        }

        table,
        th,
        td {
            border: 1px solid black;
            border-collapse: collapse;
        }

        ol,
        ul,
        li {
            margin: 0;
            margin-left: 10px;
            padding: 0;
            padding-bottom: 5px;
        }

        table,
        th,
        td {
            border: 1px solid black;
        }

        img {
            border: 1.5px solid #d5f2ed
        }

        a,
        a:visited,
        a:active,
        a:link,
        a:hover {
            text-decoration: underline;
            color: #545454;
            background-color: transparent;
        }

        div.wrapdesc {
            width: 90%;
            margin: auto;
        }

        div.imagedesc {
            width: 85%;
            margin: auto;
        }
    </style>



</head>






<title>SPRINT3</title>
</head>

<!--
	<body onload="loadNav();">
		<div id="openButton" class="openButton" onclick="openNav(true)">&#9776; Menu</div>
		<div id="sidenav" class="sidenav">
			<a class="closeButton" href="javascript:void(0)" onclick="closeNav(true)">&times;</a>
			<a href=".README.html">ReadMe</a>
			<a class="sprint" href="../../../Sprint0/Codice/userDocs/Cold%20Storage%20Service%20-%20Natali%20V3.html">Sprint0</a>
			<a class="sprint" href="../../../Sprint1.0/Codice/userDocs/Sprint%201.0%20-%20V3.html">Sprint1.0</a>
			<a class="sprint" href="../../../Sprint1.1/Codice/userDocs/Sprint%201.1%20-%20V3.html">Sprint1.1</a>
			<a id="currentSprint" class="sprint" href="#">&#8211;&#8212; Sprint2 &#8212;&#8211;</a>
			<div class="sidenavSection">
				<a href="#Goal Sprint 2">Goal Sprint 2</a>
				<a href="#Requisiti">Requisiti</a>
				<a href="#Analisi dei Requisiti">Analisi dei Requisiti</a>
				<a href="#Analisi del Problema">Analisi del Problema</a>
				<a href="#Test Plan">Test Plan</a>
				<a href="#Progettazione">Progettazione</a>
				<a href="#Deployment">Deployment</a>
			</div>
			<p class="separator">&mdash;&mdash;&mdash;&ndash;&ndash;&mdash;&mdash;&mdash;</p>
			<a class="sprint" href="../../../Sprint3/Codice/userDoc/Sprint%203.html">Sprint3</a>
			<bottom-spacer/>
		</div>
-->

<body>
    <div id="top">
        <h1>SPRINT3<font size="5"></font>
        </h1>
    </div>

    <div class="body">
        <h2>Introduction</h2>
        <div class="remark">
            SPRINT3: progettazione e sviluppo di Led, Sonar e MonitoringDevice (Arasi).
            <br><br>

            In questo sprint verrà sviluppato MonitoringDevice e le componenti gestite da esso.<br>
            <!--Inizialmente verrà sviluppato nello stesso contesto di WIS per semplificare il testing, successivamente
    verrà separato.<br>-->
            Sonar verrà sviluppato solo logicamente, in uno sprint futuro verrà sviluppato anche l'interazione con il
            sonar fisico.

            <br><br>
            Nel precedente <a
                href="../../WasteIncineratorService_2.1/userDocs/PyeshchykMarko_ArasiStefano_WIS24.html">SPRINT</a>
            siamo giunti a questo questa architettura iniziale di riferimento:
            <img src="../../WasteIncineratorService_2.1/wis24arch.png"><br>
        </div>

        <h2>Requirements</h2>
        <div class="remark">
            <a href="./html/TemaFinale24.html">Requisiti</a>
        </div>



        <h2>Requirement analysis</h2>
        <div class="remark">
            <h3>MonitoringDevice</h3>
            Composto da un RaspberryPi che gestisce un Sonar e un Led (forniti dal committente). Deve inviare a WIS lo
            stato di AshStorage.<br><br>
            Sonar e Led in quanto collegati ad un RaspberryPI sono possibili da considerare in un contesto diverso dal
            resto del sistema.<br>
            MonitoringDevice in quanto coordinatore farà anch'esso parte di questo contesto.<br>
            In maniera analoga a WIS MonitoringDevice racchide tutta la logica delle sue componenti.<br>
            In quanto MonitoringDevice deve essere costantemente aggiornato può essere sviluppato come un attore<br><br>
            MonitoringDevice deve gestire il funzionamento di Led che potrebbe trovarsi in uno stato in cui Incinerator
            sta bruciando e
            contemporaneamente AshStorage sia pieno/vuoto, in questo caso è stato deciso di far lampeggiare il led in
            quanto indica uno stato più significativo per il MonitoringDevice.<br><br>
            Non è stato definito quando AshStorage sia vuoto.
            <h3>Sonar</h3>
            Si occupa della misurazione della distanza tra se stesso e la pila di cenere nell'AshStorage.
            Per questo scopo si interfaccia con un sonar fisico (SONAR HC-SR04) che gli manda le distanze rilevate. <br>
            L'informazione di 3-4 RP che AshStorage può contenere è superflua perche è stato già dato il limite DLIMIT
            al sonar. <br>
            <h3>Il Led</h3> Deve accendersi/spegnersi o lampeggiare in base allo stato del sistema. Anche qusto si
            interfaccia con il led fisico.



            <br><br>
            <h3>Agenti esterni</h3>
            Lo sviluppo degli agenti esterni per rifornire e svuotare la WasteStorage e AshStorage non sono dei
            requisiti:
            <li>quando WasteStorage viene rifornito Scale rileverà un peso maggiore</li>
            <li>quanto AshStorage viene svuotato Sonar rileverà una distanza maggiore</li>
            In entrambi i casi il sistema funziona autonomamente e reagisce alle modifiche.


            <br><br>
            <h3>Modello dei requisiti</h3>
            <img src="../../wis24arch_modello_requisiti.png">
        </div>

        <h2>Problem analysis</h2>
        <div class="remark">

            <h3>MonitoringDevice</h3>
            Il MonitoringDevice funge da coordinatore al Sonar e al Led,
            che in quanto collegati ad un RaspberryPI sono possibili da considerare in un contesto diverso.<br><br>
            Il MonitoringDevice sarà quindi l'intermediario tra WIS e le sue componenti per evitare
            di dare maggiori responsabilità alle componenti stesse.<br><br>
            Messaggi inviati a WIS:<br>
            <ul>
                <li><code>Dispatch sonar_value:sonar_value(K)</code></li>
            </ul>
            Questo per informare WIS dello stato di AshStorage.<br><br>

            Messaggi ricevuti da WIS:<br>
            <ul>
                <li><code>Dispatch burn_end:burn_end(X)</code></li>
                <li><code>Dispatch burn_start:burn_start(X)</code></li>
            </ul>
            Questo per poter gestire correttamente Led.<br><br>

            Per determinare quando AshStorage sia vuoto si presuppone che all'avvio del sistema sia vuoto.

            <br><br>
            <h3>Led</h3>
            Il Led è una componente molto semplice a cui viene solo inviato il comando da eseguire,
            la gestione dello stato è trasferita sul MonitoringDevice.<br><br>
            Messaggi inviati a Led:<br>
            <ul>
                <li><code>Dispatch led_on:led_on(N)</code></li>
                <li><code>Dispatch led_off:led_off(N)</code></li>
                <li><code>Dispatch led_flashing:led_flashing(N)</code></li>
            </ul>

            In quanto ha il compito di rimanere sempre attivo mantenendo il suo stato e modificarlo quanto richiesto
            verrà modellato come un attore.


            <br><br>
            <h3>Sonar</h3>
            Il Sonar è la componente che deve comunicare al MonitoringDevice i propri rilevamenti.<br>
            Sonar è modellabile come un attore in quanto deve costantemente aggiornare MonitoringDevice del livello di
            AshStorage.<br><br>
            Essendo però il sonar una componente hardware bisogna progettare l'attore Sonar in modo che sia "Technology
            Indipendent".<br>
            Ciò è reso possibile grazie all'inversione delle dipendenze,
            rendendo l'attore Sonar un "Adapter" ai sonar hardware e definendo noi l'interfaccia per la comunicazione a
            questi oggetti.<br><br>
            L'output del sonar hardware è uno stream di dati da mantenere sempre aggiornato.<br>
            Per fare ciò seguiremo il modello definito in <a
                href="./html/RaspApplCode24.html#progetto-sonarqak24">Sonar24</a>,
            introducendo un attore sonar_device che incapsuli l'output del sonar fisico e lo filtri comunicando le
            informazioni rilevanti a Sonar<br><br>
            Messaggi inviati da Sonar a MonitoringDevice:<br>
            <ul>
                <li><code>Dispatch sonar_value:sonar_value(K)</code></li>
            </ul><br><br>

            Messaggi inviati da sonar_device a Sonar:<br>
            <ul>
                <li><code>Event sonardata:sonardata(K)</code></li>
            </ul>

            <br><br>
            <h3>Agenti esterni</h3>
            Avendo a disposizione il sonar fisico non è necessario modellare un agente esterno per simularne il
            funzionamento.


            <br><br><br>
            <h3>Architettura logica</h3>
            <img src="../wis24arch_architettura_logica.png">
        </div>

        <h2>Test plans</h2>
        <div class="remark">
            Si deve verificare che MonitoringDevice gestisca correttamente il proprio stato interno per inviare al Led i
            messaggi corretti.
        </div>

        <h2>Project</h2>
        <div class="remark">
            <a href="../src/TemaFinale24.qak">Progetto</a><br><br>
            Inizialmente sonar_device verrà sviluppato solo come mock per testare il funzionamento del resto del
            sistema, in uno SPRINT successivo verrà implementato nel completo.<br><br>

            Nonostante si presuppone che AshStorage venga inizzializzato vuoto è stato implementato il seguente sistema
            per sicurezza:<br>
            MonitoringDevice salva la distanza più alta rilevata in una variabile inizialmente settata ad un valore
            basso.
            Ciò viene fatto per verificare se alle successive modifiche di rilevazione del sonar questo valore venga
            uguagliato, indicando che AshStorage è vuoto.<br>
            Nel caso in cui AshStorage non venga inizializzato vuoto continuerà a funzionare considerandolo con
            dimensioni ridotte e imposterà il valore corretto della distanza quando AshStorage verrà
            svuotato completamente continuando a funzionare correttamente.<br><br>

        </div>

        <h2>Testing</h2>
        <div class="remark">
            Il testing è stato sviluppato in <a href="../src/main/java/test/MD_test.java"> MD_test.java</a>
        </div>

        <h2>Deployment</h2>


        <h2>Maintenance</h2>
        <h2>Prossimi sviluppi</h2>
        <div class="remark">
            Nel prossimo SPRINT si procederà ad analizzare e sviluppare OpRObot, in particolare come muoverlo nella
            service area correttamente, aggiornando il proprio stato.
        </div>
        <br><br>
        <!-- USEFUL
<table style="width:100%" border="1">
<tr>
<td style="width:50%">
</td>
<td></td>
</tr>
</table>
-->

<div style="background-color:rgba(86, 56, 253, 0.9); width:60%;text-align:left;color:white">
    By Marko P'yeshchyk, mat: 0001103132, email: marko.pyeshchyk@studio.unibo.it
    <img src="../../../img/marko.jpg" alt="mbot" width="15%" height="15%"><br>
    And Arasi Stefano, mat: 0001103134, email: arasi.stefano@studio.unibo.it
    <img src="../../../img/stefano.jpg" alt="mbot" width="15%" height="15%"><br>
GIT repo: <a href="https://github.com/Marko-Pyeshchyk/Waste-Incinerator-Service.git" style="color: #90ee90;">https://github.com/Marko-Pyeshchyk/Waste-Incinerator-Service.git</a>
</div>
</body>
</html>